<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="dynamicTitle">MAVIX SURX</title>
    <script src="firebase-app-compat.js"></script>
    <script src="firebase-auth-compat.js"></script>
    <script src="firebase-database-compat.js"></script>
    <script src="firebase-storage-compat.js"></script>
    <link rel="stylesheet" href="all.min.css">
    <link href="css2" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="maintenance-overlay" id="maintenanceOverlay">
        <i class="fas fa-tools"></i>
        <h2 id="maintenanceTitle">Website dalam Pemeliharaan</h2>
        <p id="maintenanceMessage">Mohon maaf atas ketidaknyamanannya. Kami sedang melakukan pemeliharaan untuk meningkatkan layanan kami. Silakan coba lagi nanti.</p>
    </div>

    <div class="login-register-container" id="loginRegisterContainer">
        <div class="auth-card">
            <h2>Login</h2>
            <div class="form-group">
                <label for="loginEmail">Email</label>
                <input type="email" id="loginEmail" placeholder="gmailanda@gmail.com">
            </div>
            <div class="form-group">
                <label for="loginPassword">Password</label>
                <input type="password" id="loginPassword" placeholder="password">
            </div>
            <button class="auth-btn" id="loginBtn">Login</button>
            <p class="auth-link">Lupa Password? <a href="#" id="forgotPasswordLink">Reset di sini</a></p>
            <p class="auth-link">Belum punya akun? <a href="#" id="showRegisterLink">Daftar sekarang</a></p>
            <div class="error" id="loginError"></div>
        </div>

        <div class="auth-card" id="registerForm" style="display: none;">
            <h2>Daftar</h2>
            <div class="form-group">
                <label for="registerEmail">Email</label>
                <input type="email" id="registerEmail" placeholder="reyzStain@gmail.com">
            </div>
            <div class="form-group">
                <label for="registerPassword">Password</label>
                <input type="password" id="registerPassword" placeholder="password">
            </div>
            <button class="auth-btn" id="registerBtn">Daftar</button>
            <p class="auth-link">Sudah punya akun? <a href="#" id="showLoginLink">Login di sini</a></p>
            <div class="error" id="registerError"></div>
        </div>
    </div>

    <div class="container main-app-container" id="mainAppContainer" style="display: none;">
        <header>
            <div class="logo">
                <img id="dynamicLogo" src="https://files.catbox.moe/257kxn.jpg" alt="MAVIX Logo">
            </div>
            <h1 id="dynamicTitleContent">MAVIX BUG</h1>
            <p>Bug WhatsApp dengan mudah dan cepat</p>
            <div class="header-buttons">
                <button class="dashboard-btn" id="showDashboardStats">Dashboard</button>
                <button class="profile-btn" id="showProfile">Profile</button>
                <button class="topup-btn" id="showTopup">Top Up Limit</button>
                <button class="admin-btn hidden" id="showAdminPanel">Admin Panel</button>
            </div>
        </header>

        <div class="ad-banner">
            <h3>Bergabunglah dengan Channel Kami!</h3>
            <p>Dapatkan akses eksklusif untuk bug dan fitur lainnya</p>
            <div class="button-group">
                <a href="#" class="join-btn" id="joinChannel"><i class="fab fa-whatsapp"></i> Gabung WA Channel</a>
                <a href="#" class="chat-btn" id="showChat"><i class="fas fa-comments"></i> Live Chat Admin</a>
                <a href="#" class="chat-btn" id="startUserChat"><i class="fas fa-user-friends"></i> Chat Pengguna Lain</a>
            </div>
        </div>

        <div class="bug-form">
            <h2>Kirim Bug</h2>
            <div class="form-group">
                <label for="phone">Nomor WhatsApp (Indonesia)</label>
                <input type="text" id="phone" placeholder="628xxxxxxxxxx" maxlength="15">
                <div class="error" id="phoneError">Nomor harus dimulai dengan 628 dan minimal 7 digit setelahnya</div>
                <p style="font-size: 0.9rem; margin-top: 5px; color: var(--secondary); opacity: 0.9;">
                    Contoh: +62 812-3456-7890 diubah menjadi 6281234567890
                </p>
                <p style="font-size: 0.9rem; margin-top: 5px; color: var(--secondary); opacity: 0.9;">
                    Support Android saja
                </p>
            </div>

            <div class="form-group">
                <label for="bugType">Jenis Bug</label>
                <select id="bugType">
                    <option value=".crash">Crash</option>
                    <option value=".crashinvis">Crash Invisible</option>
                    <option value=".forclose">Force Close</option>
                    <option value=".fcinvis">Force Close Invisible</option>
                </select>
            </div>

            <button class="submit-btn" id="submitBtn">Bug Nomor</button>
            <div class="loader" id="loader"></div>
            <div class="timer" id="timer"></div>
            <div class="limit-info" id="limitInfo"></div>
        </div>

        <div class="bug-list">
            <h2>Daftar Nomor yang Dibug</h2>
            <table>
                <thead>
                    <tr>
                        <th>Nomor</th>
                        <th>Waktu</th>
                        <th>Jenis Bug</th>
                    </tr>
                </thead>
                <tbody id="bugTableBody">
                    </tbody>
            </table>
        </div>

        <footer>
            &copy; 2023 MAYLZ BUG. Semua hak dilindungi.
        </footer>
    </div>

    <div class="success-ad-modal" id="successAdModal">
        <div class="success-ad-content">
            <button class="close-btn" id="closeAdModalBtn"><i class="fas fa-times"></i></button>
            <h3>Berhasil Membug Nomor! &#127881;</h3>
            <p>Bug telah dikirim ke nomor target. Bergabunglah dengan channel WhatsApp kami untuk akses lebih banyak fitur dan update terbaru!</p>
            <a href="#" class="join-btn" id="successAdJoinBtn"><i class="fab fa-whatsapp"></i> Bergabung Sekarang</a>
            <div class="close-timer">Iklan akan tertutup dalam <span id="closeTimer">10</span> detik</div>
        </div>
    </div>

    <div class="modal-overlay" id="forgotPasswordModal">
        <div class="modal-content">
            <h3>Reset Password</h3>
            <div class="form-group">
                <label for="resetEmail">Masukkan Email Anda</label>
                <input type="email" id="resetEmail" placeholder="killyou@gmail.com">
            </div>
            <button class="btn-primary" id="sendResetEmailBtn">Kirim Link Reset</button>
            <button class="btn-secondary close-modal-btn">Batal</button>
            <div class="error" id="resetError"></div>
            <div class="success" id="resetSuccess" style="display: none;">Link reset telah dikirim ke email Anda!</div>
        </div>
    </div>

    <div class="modal-overlay" id="profileModal">
        <div class="modal-content">
            <h3>Profil Pengguna</h3>
            <div class="profile-picture-upload">
                <img id="profilePictureDisplay" src="https://files.catbox.moe/1udtgv.jpg" alt="Profile Picture">
                <input type="file" id="profilePictureInput" accept="image/*">
                <label for="profilePictureInput">Ubah Foto Profil</label>
            </div>
            <div class="profile-info">
                <p><strong>Email Anda:</strong> <span id="profileEmail"></span></p>
                <p><strong>Password Anda:</strong>
                    <span id="profilePasswordDisplay">********</span>
                    <button class="toggle-password-btn" id="togglePasswordBtn">Show</button>
                </p>
            </div>
            <div class="form-group">
                <label for="newPassword">Ganti Password</label>
                <input type="password" id="newPassword" placeholder="password baru">
            </div>
            <button class="btn-primary" id="changePasswordBtn">Ganti Password</button>
            <button class="btn-secondary" id="logoutBtn">Logout</button>
            <button class="btn-secondary close-modal-btn">Tutup</button>
            <div class="error" id="profileError"></div>
            <div class="success" id="profileSuccess" style="display: none;">Password berhasil diganti!</div>
        </div>
    </div>

    <div class="modal-overlay" id="dashboardStatsModal">
        <div class="modal-content">
            <h3>Dashboard Statistik</h3>
            <p><strong>Total Pendaftar:</strong> <span id="totalUsersCount">0</span></p>
            <p><strong>Limit Bug Anda:</strong> <span id="userBugLimit">0</span> per hari</p>
            <p><strong>Total Penghasilan Developer:</strong> Rp <span id="developerEarnings">0</span></p>
            <p><strong>Leaderboard Topup:</strong></p>
            <ol id="leaderboardList"></ol>
            <button class="btn-secondary close-modal-btn">Tutup</button>
        </div>
    </div>

    <div class="modal-overlay" id="topupModal">
        <div class="modal-content">
            <h3>Top Up Limit</h3>
            <div class="topup-options">
                <h4>Beli Paket Limit Harian</h4>
                <button class="topup-package-btn" data-limit="3" data-price="5000">Add 3 Limit (Rp 5.000)</button>
                <button class="topup-package-btn" data-limit="6" data-price="8000">Add 6 Limit (Rp 8.000)</button>
                <button class="topup-package-btn" data-limit="10" data-price="13000">Add 10 Limit (Rp 13.000)</button>
            </div>
            <div class="topup-custom">
                <h4>Top Up Per Limit (Custom)</h4>
                <div class="form-group">
                    <label for="customLimitAmount">Jumlah Limit</label>
                    <input type="number" id="customLimitAmount" min="1" value="1">
                </div>
                <p>Harga: Rp <span id="customLimitPrice">1.500</span></p>
                <button class="btn-primary" id="buyCustomLimitBtn">Beli Limit Custom</button>
            </div>
            <button class="btn-secondary close-modal-btn">Batal</button>
        </div>
    </div>

    <div class="modal-overlay" id="paymentFormModal">
        <div class="modal-content small-modal">
            <h3>Form Pembayaran</h3>
            <form id="paymentForm">
                <div class="form-group">
                    <label>Amount (IDR)</label>
                    <input type="number" id="amount" required readonly>
                </div>
                <div class="form-group">
                    <label>Product Name</label>
                    <input type="text" id="productName" required readonly>
                </div>
                <div class="form-group">
                    <label>WhatsApp/Telegram</label>
                    <input type="text" id="contactNumber" required>
                </div>
                <button type="submit" class="btn-primary">Lanjutkan Pembayaran</button>
                <button type="button" class="btn-secondary close-modal-btn">Batal</button>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="qrisPaymentModal">
        <div class="modal-content small-modal">
            <h3>Scan QRIS untuk Bayar</h3>
            <div class="qr-container">
                <img id="qrisImage" src="" alt="QR Code">
                <div class="payment-details">
                    <div>Jumlah: <span id="modalAmount">Rp 0</span></div>
                    <div>Kedaluwarsa dalam: <span id="modalCountdown">10:00</span></div>
                </div>
                <button class="btn-secondary" id="cancelPaymentModalBtn">Batalkan Pembayaran</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="receiptModal">
        <div class="modal-content small-modal">
            <h3>Bukti Pembayaran</h3>
            <canvas id="receiptCanvas"></canvas>
            <button class="btn-primary" id="shareReceiptBtn">Bagikan ke Telegram</button>
            <button class="btn-secondary close-modal-btn">Tutup</button>
        </div>
    </div>

    <div class="modal-overlay" id="chatModal">
        <div class="modal-content chat-window">
            <div class="chat-sidebar" id="chatSidebar">
                <div class="chat-main-header">
                    <img id="myChatProfilePic" src="https://files.catbox.moe/257kxn.jpg" alt="My Profile" class="chat-target-pic">
                    <div class="chat-target-info">
                        <div class="chat-target-name" id="myChatName"></div>
                        <div class="chat-target-email" id="myChatEmail"></div>
                    </div>
                    <button class="close-modal-btn" style="position: static; margin-left: auto;">X</button> 
                </div>
                <h4>Kontak</h4>
                <div class="chat-contact-search">
                    <input type="text" id="chatContactSearch" placeholder="Cari email...">
                </div>
                <div class="chat-contact-list" id="chatContactList">
                    <div style="text-align: center; padding: 20px; color: rgba(255,255,255,0.5);">Memuat kontak...</div>
                </div>
            </div>

            <div class="chat-main" id="chatMain">
                <div class="chat-main-header">
                    <button class="back-button" id="chatBackButton"><i class="fas fa-arrow-left"></i></button>
                    <img id="currentChatTargetPic" src="https://files.catbox.moe/ayzbgi.jpg" alt="Target Profile" class="chat-target-pic">
                    <div class="chat-target-info">
                        <div class="chat-target-name" id="currentChatTargetName">Pilih Kontak</div>
                        <div class="chat-target-status" id="currentChatTargetStatus"></div>
                    </div>
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div style="text-align: center; padding: 20px; color: rgba(255,255,255,0.5);">Pilih kontak untuk memulai chat.</div>
                </div>
                <div class="chat-input">
                    <button id="attachFileBtn" class="chat-file-btn" title="Kirim Gambar"><i class="fas fa-image"></i></button>
                    <input type="file" id="attachFileInput" accept="image/*" class="hidden">

                    <button id="recordAudioBtn" class="chat-audio-btn" title="Kirim Pesan Suara"><i class="fas fa-microphone"></i></button>
                    <span id="recordingStatus" class="recording-status">Merekam...</span>

                    <input type="text" id="chatInput" placeholder="Ketik pesan Anda...">
                    <button id="sendMessageBtn"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="adminPanelModal">
        <div class="modal-content admin-panel">
            <h3>Panel Admin</h3>
            
            <div class="admin-section">
                <h4>Kontrol Akun Pengguna</h4>
                <div class="admin-search-bar">
                    <input type="text" id="adminSearchInput" placeholder="Cari email pengguna...">
                </div>
                <div class="admin-table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Email</th>
                                <th>Limit</th>
                                <th>Digunakan</th>
                                <th>Status</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="userListAdmin">
                            </tbody>
                    </table>
                </div>
                <div class="error" id="adminUserControlError"></div>
                <div class="success" id="adminUserControlSuccess" style="display: none;"></div>
            </div>

            <div class="admin-section">
                <h4>Pengaturan Web</h4>
                <div class="form-group">
                    <label for="adminLogoUrl">URL Logo (Bulat)</label>
                    <input type="text" id="adminLogoUrl" placeholder="https://example.com/logo.jpg">
                    <button class="btn-primary" id="adminUpdateLogoBtn">Ubah Logo</button>
                </div>
                <div class="form-group">
                    <label for="adminWebTitle">Judul Web</label>
                    <input type="text" id="adminWebTitle" placeholder="SISURYA BUG">
                    <button class="btn-primary" id="adminUpdateTitleBtn">Ubah Judul</button>
                </div>
            </div>

            <div class="admin-section">
                <h4>Mode Pemeliharaan</h4>
                <div class="form-group">
                    <label for="maintenanceToggle">Status Maintenance</label>
                    <select id="maintenanceToggle">
                        <option value="off">Off</option>
                        <option value="on">On</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="maintenanceTitleInput">Judul Maintenance</label>
                    <input type="text" id="maintenanceTitleInput" placeholder="Website dalam Pemeliharaan">
                </div>
                <div class="form-group">
                    <label for="maintenanceMessageInput">Pesan Maintenance</label>
                    <textarea id="maintenanceMessageInput" placeholder="Mohon maaf atas ketidaknyamanannya..."></textarea>
                </div>
                <button class="btn-primary" id="updateMaintenanceBtn">Update Maintenance</button>
            </div>

            <button class="btn-secondary close-modal-btn">Tutup</button>
        </div>
    </div>

    <div class="app-notification" id="appNotification"></div>

    <script src="config.js"></script>
    <script src="functions.js"></script>
    <script src="script.js"></script>
</body>

</html>


